# Goc_ts

根据go语言定义的接口结构，生成http请求对应的ts相关代码

## 使用

> 参考`goc_ts/sample/manual.md`

## 目录

goc_ts

- data: 生成器结构定义（生成器：保存go代码解析结果并据此生成ts代码的结构）
- generate_ts: 根据生成器生成ts代码
- initialize: 初始化功能，包含`-i`/`-g`等启动参数的功能实现
- parse: 解析go代码
- sample: 使用示例
- test: 测试
- utils: 工具库

## 约定

1. 使用`const URI_xxx=`定义接口uri
2. `type xxx struct {}`将被识别为自定义结构类型，
   其中结构体名称形如`xxxReq`/`xxxRes`的，将被识别为对应接口的输入/输出参数，
   每个定义的接口，其uri、接口输入输出参数名称要求一致。  
   同时因为要求相关命名一致，我们提供有根据配置生成基础接口定义文件的功能，参考使用章节
3. 后端可以通过`PostForm`解析请求参数
4. 要求go结构体的每一个字段都有`json tag`

## 开发计划

1. 添加枚举类型的支持
2. 或许可以把go解析参数的代码也生成出来

## 设计说明

1. `.http.ts`文件中，如果一个参数是自定义类型，是保留其自定义类型，还是将其展开成多个字段？  
我们选择保留其自定义类型，因为一个请求的输入参数是结构体，
常见情况是分页信息（包含页数和每页记录数）或创建请求的对象（例如创建一个用户，可能包含用户名、密码等）
而这些情况其实都不适合展开字段：分页信息可以写一个通用的默认分页；
而`传递一个想要创建的用户`应用场景中，把所有需要的参数写成结构体本身更有利于代码阅读。
2. 为什么使用`formdata`在前后端之间传递消息？
因为使用`formdata`可以在前端控制台看到请求参数
